<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار تفاعلي</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

    <script>
        // --- (جديد) سنستخدم الوقت الحالي كرقم نسخة متغيرة ---
        const cacheBuster = new Date().getTime(); 
        
        try {
            const urlParams = new URLSearchParams(window.location.search);
            const quizName = urlParams.get('quiz');
            if (quizName) {
                const preloadLink = document.createElement('link');
                preloadLink.rel = 'preload';
                preloadLink.as = 'script';
                // --- (جديد) استخدام الرقم المتغير هنا ---
                preloadLink.href = `script_${quizName}.js?v=${cacheBuster}`; 
                document.head.appendChild(preloadLink);
            }
        } catch (e) {
            console.error("Preload failed", e);
        }
    </script>
</head>
<body>

    <div class="quiz-container">
        <div class="quiz-header">
            <h2><span id="quiz-title">جاري تحميل الاختبار...</span></h2>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <p id="question-counter" class="question-counter">السؤال 0 / 0</p>
        </div>
        <div class="quiz-body" id="quiz-body">
            <h3 id="question-text">جاري تحميل السؤال...</h3>
            <div class="options-container" id="tf-options-container" style="display: none;">
                <button class="option-btn" data-answer="true">...</button>
                <button class="option-btn" data-answer="false">...</button>
            </div>
            <div class="options-container" id="mc-options-container" style="display: none;">
                <button class="option-btn" data-index="0">...</button>
                <button class="option-btn" data-index="1">...</button>
                <button class="option-btn" data-index="2">...</button>
                <button class="option-btn" data-index="3">...</button>
            </div>
            <p id="feedback" class="feedback"></p>
        </div>
        <div class="results-container" id="results-container" style="display: none;">
            </div>
        <div class="quiz-footer" id="quiz-footer">
            <button id="next-btn" class="next-btn" disabled>السؤال التالي ←</button>
        </div>
    </div>

    <script>
        // --- (جديد) استخدام نفس الرقم المتغير من فوق ---
        // (لا حاجة لتعريفه مرة أخرى، هو موجود)
        
        const urlParams_main = new URLSearchParams(window.location.search);
        const quizName_main = urlParams_main.get('quiz');

        if (quizName_main) {
            const scriptTag = document.createElement('script');
            
            // --- (جديد) استخدام الرقم المتغير هنا أيضاً ---
            scriptTag.src = `script_${quizName_main}.js?v=${cacheBuster}`; 
            
            document.body.appendChild(scriptTag);
        } else {
            // ... (باقي كود الخطأ زي ما هو) ...
        }
    </script>
</body>
</html>
